var Z=Object.defineProperty;var x=(n,t,r)=>t in n?Z(n,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):n[t]=r;var S=(n,t,r)=>(x(n,typeof t!="symbol"?t+"":t,r),r);import{S as M,i as H,s as W,e as T,t as P,a as q,b as _,c as E,l as ee,d as A,n as Q,f as k,g as te,h as $,j as v,k as G,m as N,o as B,p as O,q as j,r as I,u as V,v as F,w as se}from"./vendor.8cc70c4a.js";const re=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))s(e);new MutationObserver(e=>{for(const o of e)if(o.type==="childList")for(const l of o.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&s(l)}).observe(document,{childList:!0,subtree:!0});function r(e){const o={};return e.integrity&&(o.integrity=e.integrity),e.referrerpolicy&&(o.referrerPolicy=e.referrerpolicy),e.crossorigin==="use-credentials"?o.credentials="include":e.crossorigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function s(e){if(e.ep)return;e.ep=!0;const o=r(e);fetch(e.href,o)}};re();function b(n,t){return{row:n,column:t}}function K(n,t){return n.row===t.row&&n.column===t.column}var p;(function(n){n[n.Empty=0]="Empty",n[n.WhitePiece=1]="WhitePiece",n[n.BlackPiece=2]="BlackPiece",n[n.Card=3]="Card"})(p||(p={}));function ne(n,t){for(const r of t)if(n.row===r.row&&n.column===r.column)return!0;return!1}function L(n,t){const r=[];for(let s=t.row-1;s>-1;s--){const e=b(s,t.column);if(n.getSquareType(e)!==p.Empty)break;r.push(e)}for(let s=t.row+1;s<n.rows;s++){const e=b(s,t.column);if(n.getSquareType(e)!==p.Empty)break;r.push(e)}for(let s=t.column-1;s>-1;s--){const e=b(t.row,s);if(n.getSquareType(e)!==p.Empty)break;r.push(e)}for(let s=t.column+1;s<n.columns;s++){const e=b(t.row,s);if(n.getSquareType(e)!==p.Empty)break;r.push(e)}for(let s=t.row-1,e=t.column-1;s>-1&&e>-1;s--,e--){const o=b(s,e);if(n.getSquareType(o)!==p.Empty)break;r.push(o)}for(let s=t.row-1,e=t.column+1;s>-1&&e<n.columns;s--,e++){const o=b(s,e);if(n.getSquareType(o)!==p.Empty)break;r.push(o)}for(let s=t.row+1,e=t.column-1;s<n.rows&&e>-1;s++,e--){const o=b(s,e);if(n.getSquareType(o)!==p.Empty)break;r.push(o)}for(let s=t.row+1,e=t.column+1;s<n.rows&&e<n.columns;s++,e++){const o=b(s,e);if(n.getSquareType(o)!==p.Empty)break;r.push(o)}return r}function R(n,t){for(let r=0;r<n.length;r++)for(let s=0;s<n[r].length;s++)t(n[r][s],r,s)}function z(n,t,r){var s=new Array(n);for(let e=0;e<n;e++){s[e]=new Array(t);for(let o=0;o<t;o++)s[e][o]=r}return s}class oe{constructor(t,r){S(this,"rows");S(this,"columns");S(this,"squareTypes");this.rows=t,this.columns=r,this.squareTypes=z(t,r,p.Empty)}getSquareType(t){return this.squareTypes[t.row][t.column]}setSquareType(t,r){this.squareTypes[t.row][t.column]=r}forEachSquareType(t){R(this.squareTypes,(r,s,e)=>{t(r,b(s,e))})}movePiece(t,r){this.setSquareType(r,this.getSquareType(t)),this.setSquareType(t,p.Empty)}getQueenPositions(){const t={white:[],black:[]};return this.forEachSquareType((r,s)=>{r===p.WhitePiece?t.white.push(s):r===p.BlackPiece&&t.black.push(s)}),t}}class ie{constructor(t){S(this,"gameSettings");S(this,"boardData");S(this,"turn",{color:void 0,action:void 0});S(this,"winCondition");this.gameSettings=t,this.boardData=new oe(this.gameSettings.rows,this.gameSettings.columns);for(const r of this.gameSettings.start.pieces.white)this.boardData.setSquareType(r,p.WhitePiece);for(const r of this.gameSettings.start.pieces.black)this.boardData.setSquareType(r,p.BlackPiece);this.turn.color=this.gameSettings.start.color,this.turn.action=this.gameSettings.start.action,this.winCondition=this.getWinCondition()}nextTurn(){this.turn.color=this.turn.color==="black"?"white":"black",this.turn.color===this.gameSettings.start.color&&(this.turn.action=this.turn.action==="card"?"piece":"card"),this.winCondition=this.getWinCondition()}getWinCondition(){const t=this.boardData.getQueenPositions();let r=!0,s=!0;for(const e of t.white)if(L(this.boardData,e).length!==0){r=!1;break}for(const e of t.black)if(L(this.boardData,e).length!==0){s=!1;break}return r&&s?this.turn.color==="white"?"blackwin":"whitewin":r?"blackwin":s?"whitewin":"nowin"}}function le(n,t,r,s,e,o){return{rows:n,columns:t,start:{pieces:{white:r.map(l=>b(l[0],l[1])),black:s.map(l=>b(l[0],l[1]))},color:e,action:o}}}function ae(n){let t,r,s,e,o;return{c(){t=T("div"),r=P(n[1]),q(t,"class",s=""+(n[3]+" "+n[0]+" "+n[2]+" svelte-k1umkl"))},m(l,i){_(l,t,i),E(t,r),e||(o=ee(t,"click",n[4]),e=!0)},p(l,[i]){i&2&&A(r,l[1]),i&5&&s!==(s=""+(l[3]+" "+l[0]+" "+l[2]+" svelte-k1umkl"))&&q(t,"class",s)},i:Q,o:Q,d(l){l&&k(t),e=!1,o()}}}function ce(n,t,r){let{square:s}=t,e="";const o=g=>{r(0,e=g?"highlight":"")},l=`square 
  ${s.isBlack?"black":""}`;let i="",a="";const u=g=>{switch(g===p.Card?r(2,a="card"):r(2,a=""),g){case p.Empty:case p.Card:r(1,i="");break;case p.WhitePiece:r(1,i="\u2655");break;case p.BlackPiece:r(1,i="\u265B");break}r(5,s.squareType=g,s)};u(s.squareType);const h=te(),y=()=>{h("square-click",{position:b(s.row,s.column),squareType:s.squareType})};return n.$$set=g=>{"square"in g&&r(5,s=g.square)},[e,i,a,l,y,s,o,u]}class ue extends M{constructor(t){super();H(this,t,ce,ae,W,{square:5,setHighlight:6,setType:7})}get setHighlight(){return this.$$.ctx[6]}get setType(){return this.$$.ctx[7]}}function J(n,t,r){const s=n.slice();return s[12]=t[r],s}function U(n,t,r){const s=n.slice();return s[15]=t[r],s[16]=t,s[17]=r,s}function X(n){let t,r=n[15],s;const e=()=>n[6](t,r),o=()=>n[6](null,r);let l={square:n[15]};return t=new ue({props:l}),e(),t.$on("square-click",n[7]),{c(){G(t.$$.fragment)},m(i,a){N(t,i,a),s=!0},p(i,a){r!==i[15]&&(o(),r=i[15],e());const u={};t.$set(u)},i(i){s||(v(t.$$.fragment,i),s=!0)},o(i){B(t.$$.fragment,i),s=!1},d(i){o(),O(t,i)}}}function Y(n){let t,r,s,e=n[12],o=[];for(let i=0;i<e.length;i+=1)o[i]=X(U(n,e,i));const l=i=>B(o[i],1,1,()=>{o[i]=null});return{c(){t=T("div");for(let i=0;i<o.length;i+=1)o[i].c();r=$(),q(t,"class","row svelte-1q7kgo4")},m(i,a){_(i,t,a);for(let u=0;u<o.length;u+=1)o[u].m(t,null);E(t,r),s=!0},p(i,a){if(a&3){e=i[12];let u;for(u=0;u<e.length;u+=1){const h=U(i,e,u);o[u]?(o[u].p(h,a),v(o[u],1)):(o[u]=X(h),o[u].c(),v(o[u],1),o[u].m(t,r))}for(j(),u=e.length;u<o.length;u+=1)l(u);I()}},i(i){if(!s){for(let a=0;a<e.length;a+=1)v(o[a]);s=!0}},o(i){o=o.filter(Boolean);for(let a=0;a<o.length;a+=1)B(o[a]);s=!1},d(i){i&&k(t),V(o,i)}}}function fe(n){let t,r,s=n[1],e=[];for(let l=0;l<s.length;l+=1)e[l]=Y(J(n,s,l));const o=l=>B(e[l],1,1,()=>{e[l]=null});return{c(){t=T("div");for(let l=0;l<e.length;l+=1)e[l].c();q(t,"class","board svelte-1q7kgo4")},m(l,i){_(l,t,i);for(let a=0;a<e.length;a+=1)e[a].m(t,null);r=!0},p(l,[i]){if(i&3){s=l[1];let a;for(a=0;a<s.length;a+=1){const u=J(l,s,a);e[a]?(e[a].p(u,i),v(e[a],1)):(e[a]=Y(u),e[a].c(),v(e[a],1),e[a].m(t,null))}for(j(),a=s.length;a<e.length;a+=1)o(a);I()}},i(l){if(!r){for(let i=0;i<s.length;i+=1)v(e[i]);r=!0}},o(l){e=e.filter(Boolean);for(let i=0;i<e.length;i+=1)B(e[i]);r=!1},d(l){l&&k(t),V(e,l)}}}function he(n,t,r){let{boardData:s}=t,e=z(s.rows,s.columns);const o=f=>e[f.row][f.column],l=f=>{R(e,(m,c,d)=>{f(m,b(c,d))})},i=f=>{f.forEachSquareType((m,c)=>{e[c.row][c.column].setType(m)})},a=f=>{for(const m of f)o(m).setHighlight(!0)},u=()=>{l((f,m)=>{f.setHighlight(!1)})};let h=!1;const y=[];let g=[];for(let f=0;f<s.squareTypes.length;f++){for(let m=0;m<s.squareTypes[f].length;m++)h=!h,g.push({row:f,column:m,squareType:s.squareTypes[f][m],isBlack:h});h=!h,y.push(g),g=[]}function w(f,m){F[f?"unshift":"push"](()=>{e[m.row][m.column]=f,r(0,e),r(1,y)})}function C(f){se.call(this,n,f)}return n.$$set=f=>{"boardData"in f&&r(2,s=f.boardData)},[e,y,s,i,a,u,w,C]}class pe extends M{constructor(t){super();H(this,t,he,fe,W,{boardData:2,setBoard:3,highlightSquares:4,clearHighlights:5})}get setBoard(){return this.$$.ctx[3]}get highlightSquares(){return this.$$.ctx[4]}get clearHighlights(){return this.$$.ctx[5]}}function me(n){let t,r,s,e,o,l,i,a,u,h,y,g,w,C,f,m={boardData:n[4]};return s=new pe({props:m}),n[6](s),s.$on("square-click",n[5]),{c(){t=T("button"),t.textContent="New Game",r=$(),G(s.$$.fragment),e=$(),o=T("div"),l=P("Turn: "),i=P(n[1]),a=$(),u=T("div"),h=P("Action: "),y=P(n[2]),g=$(),w=T("div"),C=P(n[3]),q(t,"id","newGame"),q(t,"class","svelte-1li74nf"),q(o,"class","svelte-1li74nf"),q(u,"class","svelte-1li74nf"),q(w,"class","svelte-1li74nf")},m(c,d){_(c,t,d),_(c,r,d),N(s,c,d),_(c,e,d),_(c,o,d),E(o,l),E(o,i),_(c,a,d),_(c,u,d),E(u,h),E(u,y),_(c,g,d),_(c,w,d),E(w,C),f=!0},p(c,[d]){const D={};s.$set(D),(!f||d&2)&&A(i,c[1]),(!f||d&4)&&A(y,c[2]),(!f||d&8)&&A(C,c[3])},i(c){f||(v(s.$$.fragment,c),f=!0)},o(c){B(s.$$.fragment,c),f=!1},d(c){c&&k(t),c&&k(r),n[6](null),O(s,c),c&&k(e),c&&k(o),c&&k(a),c&&k(u),c&&k(g),c&&k(w)}}}function ge(n,t,r){const s=le(8,8,[[0,2],[0,4]],[[7,3],[7,5]],"white","piece");let e=new ie(s),o=e.boardData,l,i=e.turn.color,a=e.turn.action,u=e.winCondition;const h={wasClicked:!1,position:void 0,validMoves:void 0},y=()=>{e.nextTurn(),r(1,i=e.turn.color),r(2,a=e.turn.action),r(3,u=e.winCondition),l.setBoard(e.boardData)},g=(m,c)=>{h.wasClicked=!0,h.position=m,h.validMoves=c,l.highlightSquares(c)},w=()=>{h.wasClicked=!1,h.position=void 0,h.validMoves=void 0,l.clearHighlights()},C=m=>{const{position:c,squareType:d}=m.detail;switch(d){case p.Empty:e.turn.action==="card"&&(e.boardData.setSquareType(c,p.Card),y()),e.turn.action==="piece"&&h.wasClicked&&(ne(c,h.validMoves)?(e.boardData.movePiece(h.position,c),w(),y()):w());break;case p.Card:w();break;case p.WhitePiece:if(h.wasClicked&&K(h.position,c)){w();break}if(w(),e.turn.action==="piece"&&e.turn.color==="white"){const D=L(e.boardData,c);g(c,D)}break;case p.BlackPiece:if(h.wasClicked&&K(h.position,c)){w();break}if(w(),e.turn.action==="piece"&&e.turn.color==="black"){const D=L(e.boardData,c);g(c,D)}break}};function f(m){F[m?"unshift":"push"](()=>{l=m,r(0,l)})}return[l,i,a,u,o,C,f]}class de extends M{constructor(t){super();H(this,t,ge,me,W,{})}}function we(n){let t,r,s,e;return s=new de({}),{c(){t=T("h1"),t.textContent="Blackout",r=$(),G(s.$$.fragment),q(t,"class","svelte-1li74nf")},m(o,l){_(o,t,l),_(o,r,l),N(s,o,l),e=!0},p:Q,i(o){e||(v(s.$$.fragment,o),e=!0)},o(o){B(s.$$.fragment,o),e=!1},d(o){o&&k(t),o&&k(r),O(s,o)}}}class _e extends M{constructor(t){super();H(this,t,null,we,W,{})}}new _e({target:document.getElementById("app")});
