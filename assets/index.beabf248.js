var se=Object.defineProperty;var re=(o,e,r)=>e in o?se(o,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):o[e]=r;var q=(o,e,r)=>(re(o,typeof e!="symbol"?e+"":e,r),r);import{S as $,i as H,s as W,e as E,t as D,a as P,b as y,c as A,l as F,d as L,n as Q,f as v,g as oe,h as M,j as C,k as G,m as N,o as B,p as O,q as K,r as R,u as z,v as J,w as ne}from"./vendor.8cc70c4a.js";const ie=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))s(t);new MutationObserver(t=>{for(const n of t)if(n.type==="childList")for(const i of n.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&s(i)}).observe(document,{childList:!0,subtree:!0});function r(t){const n={};return t.integrity&&(n.integrity=t.integrity),t.referrerpolicy&&(n.referrerPolicy=t.referrerpolicy),t.crossorigin==="use-credentials"?n.credentials="include":t.crossorigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function s(t){if(t.ep)return;t.ep=!0;const n=r(t);fetch(t.href,n)}};ie();class j{constructor(e,r){this.row=e,this.column=r}static isEqual(e,r){return e.row===r.row&&e.column===r.column}}function k(o,e){return new j(o,e)}var h;(function(o){o[o.Empty=0]="Empty",o[o.WhitePiece=1]="WhitePiece",o[o.BlackPiece=2]="BlackPiece",o[o.Card=3]="Card"})(h||(h={}));function le(o,e){for(const r of e)if(o.row===r.row&&o.column===r.column)return!0;return!1}function I(o,e){const r=[];for(let s=e.row-1;s>-1;s--){const t=k(s,e.column);if(o.getTypeAt(t)!==h.Empty)break;r.push(t)}for(let s=e.row+1;s<o.rows;s++){const t=k(s,e.column);if(o.getTypeAt(t)!==h.Empty)break;r.push(t)}for(let s=e.column-1;s>-1;s--){const t=k(e.row,s);if(o.getTypeAt(t)!==h.Empty)break;r.push(t)}for(let s=e.column+1;s<o.columns;s++){const t=k(e.row,s);if(o.getTypeAt(t)!==h.Empty)break;r.push(t)}for(let s=e.row-1,t=e.column-1;s>-1&&t>-1;s--,t--){const n=k(s,t);if(o.getTypeAt(n)!==h.Empty)break;r.push(n)}for(let s=e.row-1,t=e.column+1;s>-1&&t<o.columns;s--,t++){const n=k(s,t);if(o.getTypeAt(n)!==h.Empty)break;r.push(n)}for(let s=e.row+1,t=e.column-1;s<o.rows&&t>-1;s++,t--){const n=k(s,t);if(o.getTypeAt(n)!==h.Empty)break;r.push(n)}for(let s=e.row+1,t=e.column+1;s<o.rows&&t<o.columns;s++,t++){const n=k(s,t);if(o.getTypeAt(n)!==h.Empty)break;r.push(n)}return r}function U(o,e){for(let r=0;r<o.length;r++)for(let s=0;s<o[r].length;s++)e(o[r][s],r,s)}function X(o,e,r){var s=new Array(o);for(let t=0;t<o;t++){s[t]=new Array(e);for(let n=0;n<e;n++)s[t][n]=r}return s}class ae{constructor(e,r){q(this,"rows");q(this,"columns");q(this,"squareTypes");this.rows=e,this.columns=r,this.squareTypes=X(e,r,h.Empty)}getTypeAt(e){return this.squareTypes[e.row][e.column]}setSquareType(e,r){this.squareTypes[e.row][e.column]=r}forEachSquareType(e){U(this.squareTypes,(r,s,t)=>{e(r,k(s,t))})}movePiece(e,r){this.setSquareType(r,this.getTypeAt(e)),this.setSquareType(e,h.Empty)}getQueenPositions(){const e={white:[],black:[]};return this.forEachSquareType((r,s)=>{r===h.WhitePiece?e.white.push(s):r===h.BlackPiece&&e.black.push(s)}),e}}class Y{constructor(e){q(this,"gameSettings");q(this,"boardData");q(this,"turn",{color:void 0,action:void 0});q(this,"winCondition");this.gameSettings=e,this.boardData=new ae(this.gameSettings.rows,this.gameSettings.columns);for(const r of this.gameSettings.start.pieces.white)this.boardData.setSquareType(r,h.WhitePiece);for(const r of this.gameSettings.start.pieces.black)this.boardData.setSquareType(r,h.BlackPiece);this.turn.color=this.gameSettings.start.color,this.turn.action=this.gameSettings.start.action,this.winCondition=this.getWinCondition()}nextTurn(){this.turn.color=this.turn.color==="black"?"white":"black",this.turn.color===this.gameSettings.start.color&&(this.turn.action=this.turn.action==="card"?"piece":"card"),this.winCondition=this.getWinCondition()}getWinCondition(){const e=this.boardData.getQueenPositions();let r=!0,s=!0;for(const t of e.white)if(I(this.boardData,t).length!==0){r=!1;break}for(const t of e.black)if(I(this.boardData,t).length!==0){s=!1;break}return r&&s?this.turn.color==="white"?"blackwin":"whitewin":r?"blackwin":s?"whitewin":"nowin"}}function ce(o,e,r,s,t,n){return{rows:o,columns:e,start:{pieces:{white:r.map(i=>k(i[0],i[1])),black:s.map(i=>k(i[0],i[1]))},color:t,action:n}}}function ue(o){let e,r,s,t,n;return{c(){e=E("div"),r=D(o[0]),P(e,"class",s=""+(o[3]+" "+o[2]+" "+o[1]+" svelte-1cpfel1"))},m(i,l){y(i,e,l),A(e,r),t||(n=F(e,"click",o[4]),t=!0)},p(i,[l]){l&1&&L(r,i[0]),l&6&&s!==(s=""+(i[3]+" "+i[2]+" "+i[1]+" svelte-1cpfel1"))&&P(e,"class",s)},i:Q,o:Q,d(i){i&&v(e),t=!1,n()}}}function fe(o,e,r){let{squareData:s}=e;const t=`square 
  ${s.isBlack?"black":""}`;let n="",i="",l="";const a=g=>{r(2,l=g?"highlight":"")},c=g=>{switch(g===h.Card?r(1,i="card"):r(1,i=""),g){case h.Empty:case h.Card:r(0,n="");break;case h.WhitePiece:r(0,n="\u2655");break;case h.BlackPiece:r(0,n="\u265B");break}r(5,s.squareType=g,s)};c(s.squareType);const m=oe(),T=()=>{m("square-click",{position:k(s.row,s.column),squareType:s.squareType})};return o.$$set=g=>{"squareData"in g&&r(5,s=g.squareData)},[n,i,l,t,T,s,a,c]}class he extends ${constructor(e){super();H(this,e,fe,ue,W,{squareData:5,setHighlight:6,setType:7})}get setHighlight(){return this.$$.ctx[6]}get setType(){return this.$$.ctx[7]}}function Z(o,e,r){const s=o.slice();return s[11]=e[r],s}function x(o,e,r){const s=o.slice();return s[14]=e[r],s[15]=e,s[16]=r,s}function ee(o){let e,r=o[14],s;const t=()=>o[6](e,r),n=()=>o[6](null,r);let i={squareData:o[14]};return e=new he({props:i}),t(),e.$on("square-click",o[7]),{c(){G(e.$$.fragment)},m(l,a){N(e,l,a),s=!0},p(l,a){r!==l[14]&&(n(),r=l[14],t());const c={};e.$set(c)},i(l){s||(C(e.$$.fragment,l),s=!0)},o(l){B(e.$$.fragment,l),s=!1},d(l){n(),O(e,l)}}}function te(o){let e,r,s,t=o[11],n=[];for(let l=0;l<t.length;l+=1)n[l]=ee(x(o,t,l));const i=l=>B(n[l],1,1,()=>{n[l]=null});return{c(){e=E("div");for(let l=0;l<n.length;l+=1)n[l].c();r=M(),P(e,"class","row svelte-1q7kgo4")},m(l,a){y(l,e,a);for(let c=0;c<n.length;c+=1)n[c].m(e,null);A(e,r),s=!0},p(l,a){if(a&3){t=l[11];let c;for(c=0;c<t.length;c+=1){const m=x(l,t,c);n[c]?(n[c].p(m,a),C(n[c],1)):(n[c]=ee(m),n[c].c(),C(n[c],1),n[c].m(e,r))}for(K(),c=t.length;c<n.length;c+=1)i(c);R()}},i(l){if(!s){for(let a=0;a<t.length;a+=1)C(n[a]);s=!0}},o(l){n=n.filter(Boolean);for(let a=0;a<n.length;a+=1)B(n[a]);s=!1},d(l){l&&v(e),z(n,l)}}}function pe(o){let e,r,s=o[1],t=[];for(let i=0;i<s.length;i+=1)t[i]=te(Z(o,s,i));const n=i=>B(t[i],1,1,()=>{t[i]=null});return{c(){e=E("div");for(let i=0;i<t.length;i+=1)t[i].c();P(e,"class","board svelte-1q7kgo4")},m(i,l){y(i,e,l);for(let a=0;a<t.length;a+=1)t[a].m(e,null);r=!0},p(i,[l]){if(l&3){s=i[1];let a;for(a=0;a<s.length;a+=1){const c=Z(i,s,a);t[a]?(t[a].p(c,l),C(t[a],1)):(t[a]=te(c),t[a].c(),C(t[a],1),t[a].m(e,null))}for(K(),a=s.length;a<t.length;a+=1)n(a);R()}},i(i){if(!r){for(let l=0;l<s.length;l+=1)C(t[l]);r=!0}},o(i){t=t.filter(Boolean);for(let l=0;l<t.length;l+=1)B(t[l]);r=!1},d(i){i&&v(e),z(t,i)}}}function me(o,e,r){let{boardData:s}=e,t=X(s.rows,s.columns);const n=()=>{const u=[];let p=!1;for(let d=0;d<s.squareTypes.length;d++){const _=[];for(let w=0;w<s.squareTypes[d].length;w++)_.push({row:d,column:w,squareType:s.squareTypes[d][w],isBlack:p}),p=!p;u.push(_),p=!p}return u},i=u=>t[u.row][u.column],l=u=>{U(t,(p,d,_)=>{u(p,k(d,_))})},a=u=>{u.forEachSquareType((p,d)=>{t[d.row][d.column].setType(p)})},c=u=>{for(const p of u)i(p).setHighlight(!0)},m=()=>{l((u,p)=>{u.setHighlight(!1)})},T=n();function g(u,p){J[u?"unshift":"push"](()=>{t[p.row][p.column]=u,r(0,t),r(1,T)})}function S(u){ne.call(this,o,u)}return o.$$set=u=>{"boardData"in u&&r(2,s=u.boardData)},[t,T,s,a,c,m,g,S]}class ge extends ${constructor(e){super();H(this,e,me,pe,W,{boardData:2,setBoard:3,highlightSquares:4,clearHighlights:5})}get setBoard(){return this.$$.ctx[3]}get highlightSquares(){return this.$$.ctx[4]}get clearHighlights(){return this.$$.ctx[5]}}class de{constructor(){q(this,"isActive",!1);q(this,"position");q(this,"validMoves",[])}activate(e,r){this.isActive=!0,this.position=e,this.validMoves=I(r,e)}deactivate(){this.isActive=!1,this.position=void 0,this.validMoves=[]}}function we(o){let e,r,s,t,n,i,l,a,c,m,T,g,S,u,p,d,_,w={boardData:o[0].boardData};return s=new ge({props:w}),o[7](s),s.$on("square-click",o[6]),{c(){e=E("button"),e.textContent="New Game",r=M(),G(s.$$.fragment),t=M(),n=E("div"),i=D("Turn: "),l=D(o[2]),a=M(),c=E("div"),m=D("Action: "),T=D(o[3]),g=M(),S=E("div"),u=D(o[4])},m(f,b){y(f,e,b),y(f,r,b),N(s,f,b),y(f,t,b),y(f,n,b),A(n,i),A(n,l),y(f,a,b),y(f,c,b),A(c,m),A(c,T),y(f,g,b),y(f,S,b),A(S,u),p=!0,d||(_=F(e,"click",o[5]),d=!0)},p(f,[b]){const V={};b&1&&(V.boardData=f[0].boardData),s.$set(V),(!p||b&4)&&L(l,f[2]),(!p||b&8)&&L(T,f[3]),(!p||b&16)&&L(u,f[4])},i(f){p||(C(s.$$.fragment,f),p=!0)},o(f){B(s.$$.fragment,f),p=!1},d(f){f&&v(e),f&&v(r),o[7](null),O(s,f),f&&v(t),f&&v(n),f&&v(a),f&&v(c),f&&v(g),f&&v(S),d=!1,_()}}}function _e(o,e,r){const s=ce(8,8,[[0,2],[0,4]],[[7,3],[7,5]],"white","piece");let t=new Y(s),n,i=t.turn.color,l=t.turn.action,a=t.winCondition;const c=()=>{r(2,i=t.turn.color),r(3,l=t.turn.action),r(4,a=t.winCondition),n.setBoard(t.boardData)},m=new de,T=()=>{r(0,t=new Y(s)),c()},g=()=>{t.nextTurn(),c()},S=(_,w)=>{m.activate(_,w),n.highlightSquares(m.validMoves)},u=()=>{m.deactivate(),n.clearHighlights()},p=_=>{const{position:w,squareType:f}=_.detail;switch(f){case h.Empty:t.turn.action==="card"&&(t.boardData.setSquareType(w,h.Card),g()),t.turn.action==="piece"&&m.isActive&&(le(w,m.validMoves)&&(t.boardData.movePiece(m.position,w),g()),u());break;case h.Card:m.isActive&&u();break;case h.WhitePiece:if(m.isActive&&j.isEqual(m.position,w)){u();break}u(),t.turn.action==="piece"&&t.turn.color==="white"&&S(w,t.boardData);break;case h.BlackPiece:if(m.isActive&&j.isEqual(m.position,w)){u();break}u(),t.turn.action==="piece"&&t.turn.color==="black"&&S(w,t.boardData);break}};function d(_){J[_?"unshift":"push"](()=>{n=_,r(1,n)})}return[t,n,i,l,a,T,p,d]}class be extends ${constructor(e){super();H(this,e,_e,we,W,{})}}function ke(o){let e,r,s,t,n;return t=new be({}),{c(){e=E("div"),r=E("h1"),r.textContent="Blackout",s=M(),G(t.$$.fragment),P(r,"class","svelte-1rrmupf"),P(e,"class","container svelte-1rrmupf")},m(i,l){y(i,e,l),A(e,r),A(e,s),N(t,e,null),n=!0},p:Q,i(i){n||(C(t.$$.fragment,i),n=!0)},o(i){B(t.$$.fragment,i),n=!1},d(i){i&&v(e),O(t)}}}class ye extends ${constructor(e){super();H(this,e,null,ke,W,{})}}new ye({target:document.getElementById("app")});
